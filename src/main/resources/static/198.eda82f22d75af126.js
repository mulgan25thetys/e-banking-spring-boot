"use strict";(self.webpackChunke_banking=self.webpackChunke_banking||[]).push([[198],{7198:(D,p,a)=>{a.r(p),a.d(p,{UserModule:()=>O});var u=a(6895),m=a(6148),e=a(4650),h=a(9709),f=a(7185),_=a(7053),r=a(433),g=a(4333),T=a(5783),v=a(529);let x=(()=>{class n{constructor(t){this.http=t,this.httpOptions={headers:new v.WM({"Content-Type":"application/json"})},this.apiUrl="/api/jmlessous-ebanking/roles/"}getRole(t){return this.http.get(this.apiUrl+"find/"+t)}getAllRolesRH(){return this.http.get(this.apiUrl+"find-all-for-rh")}getAllRolesDIrectoire(){return this.http.get(this.apiUrl+"find-all-for-directoire")}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(v.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function C(n,o){1&n&&(e.TgZ(0,"p",43),e._uU(1," Entrer le pr\xe9nom d'utilisateur "),e.qZA())}function U(n,o){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,C,2,0,"p",42),e.qZA()),2&n){e.oxw();const t=e.MAs(18);e.xp6(1),e.Q6J("ngIf",null==t.errors?null:t.errors.required)}}function b(n,o){1&n&&(e.TgZ(0,"p",43),e._uU(1," Entrer le nom d'utilisateur "),e.qZA())}function M(n,o){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,b,2,0,"p",42),e.qZA()),2&n){e.oxw();const t=e.MAs(25);e.xp6(1),e.Q6J("ngIf",null==t.errors?null:t.errors.required)}}function q(n,o){1&n&&(e.TgZ(0,"p",43),e._uU(1," Entrer l'adresse email "),e.qZA())}function y(n,o){1&n&&(e.TgZ(0,"p",43),e._uU(1," Adresse email invalide "),e.qZA())}function J(n,o){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,q,2,0,"p",42),e.YNc(2,y,2,0,"p",42),e.qZA()),2&n){e.oxw();const t=e.MAs(33);e.xp6(1),e.Q6J("ngIf",null==t.errors?null:t.errors.required),e.xp6(1),e.Q6J("ngIf",null==t.errors?null:t.errors.pattern)}}const N=function(n){return[n]};function L(n,o){if(1&n&&(e.TgZ(0,"option",44),e._uU(1),e.qZA()),2&n){const t=o.$implicit;e.Q6J("value",e.VKq(2,N,t.id)),e.xp6(1),e.hij(" ",t.name," ")}}function E(n,o){1&n&&e._UZ(0,"div",45)}let Z=(()=>{class n{constructor(t,i,d,s){this.auth=t,this.userService=i,this.roleService=d,this.toastr=s,this.loader=!1,this.emitter=new e.vpe,this.isLoaded=!1,this.roles=[],this.user=new T.n}ngOnInit(){this.auth.isSuperAdmin()?this.getAllRoleDirectoire():this.auth.isPersonnalManager()?this.getAllRoleRH():this.roles.push({id:1,name:"CLIENT"})}getAllRoleRH(){this.roleService.getAllRolesRH().subscribe(t=>{this.roles=t,this.roles.forEach(i=>{i.name=i.name.replace("ROLE_"," "),i.name=i.name.replace("_"," ")})},t=>{this.toastr.error(t,"R\xe9cup\xe9ration des roles!")})}getAllRoleDirectoire(){this.roleService.getAllRolesDIrectoire().subscribe(t=>{this.roles=t,this.roles.forEach(i=>{i.name=i.name.replace("ROLE_"," "),i.name=i.name.replace("_"," ")})},t=>{this.toastr.error(t,"R\xe9cup\xe9ration des roles!")})}ajouterUnPersonnel(t){this.isLoaded=!0;let i=document.getElementById("input-fonction").value;"default"!=i?this.roleService.getRole(i).subscribe(d=>{d.id==i&&(this.user.role=d,this.userService.addUser(this.user).subscribe(s=>{t.reset(),this.emitter.emit("ajout\xe9"),this.isLoaded=!1,$("#modalBtn").click()},s=>{this.toastr.error(s,"Ajout d'un personnel!"),this.isLoaded=!1}))},()=>{this.toastr.error("Impossible de recup\xe9rer la fonction de l'utilisateur","Fonction de l'utilisateur"),this.isLoaded=!1}):(this.toastr.warning("Si vous plait selectionner une fonction","Fonction de l'utilisateur"),this.isLoaded=!1)}closeModal(){}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(_.$),e.Y36(h.K),e.Y36(x),e.Y36(f._W))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-add"]],outputs:{emitter:"emitter"},decls:72,vars:19,consts:[["id","add-personal-details","role","dialog","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title","font-weight-400"],["type","button","data-dismiss","modal","aria-label","Close","id","modalBtn",1,"close","font-weight-400"],["aria-hidden","true"],[1,"modal-body","p-4"],["id","personaldetails"],["form","ngForm"],[1,"row"],[1,"col-12","col-sm-6"],[1,"form-group"],["for","firstName"],["type","text","name","firstname","id","firstName","required","","placeholder","Entrer le pr\xe9nom",1,"form-control",3,"ngModel","ngModelChange"],["firstname","ngModel"],[4,"ngIf"],["for","lastname"],["type","text","placeholder","Entrer le nom d'utilisateur","name","lastname","required","","placeholder","Entrer nom",1,"form-control",3,"ngModel","ngModelChange"],["lastname","ngModel"],[1,"col-12"],["for","birthDate"],[1,"position-relative"],["name","email","pattern","^[a-z0-9-.]+@[a-z-]+\\.[a-z]{2,3}$","type","text","required","","placeholder","Entrer l'adresse Email",1,"form-control",3,"ngModel","ngModelChange"],["email","ngModel"],[1,"icon-inside"],["aria-hidden","true",1,"fa","fa-envelope"],[1,"text-5","font-weight-400","mt-3"],["for","address"],["type","text","placeholder","Exemple (4th Floor, Plot No.22, Above Public Park)","name","address",1,"form-control",3,"ngModel","ngModelChange"],["for","city"],["id","city","type","text","name","city","placeholder","Indiquer la ville",1,"form-control",3,"ngModel","ngModelChange"],["for","input-zone"],["id","country","type","text","name","country","placeholder","Indiquer le pays",1,"form-control",3,"ngModel","ngModelChange"],["for","phone"],["value","","type","number","name","phone","placeholder","Num\xe9ro de t\xe9l\xe9phone",1,"form-control",3,"ngModel","ngModelChange"],["for","inputCountry"],["id","input-fonction","name","fonction",1,"custom-select"],["value","default"],[3,"value",4,"ngFor","ngForOf"],["type","button",1,"btn","btn-primary","btn-block","mt-2",3,"disabled","click"],["class","spinner-border text-light","style","width: 20px;height: 20px;","role","status",4,"ngIf"],["class","text-danger",4,"ngIf"],[1,"text-danger"],[3,"value"],["role","status",1,"spinner-border","text-light",2,"width","20px","height","20px"]],template:function(t,i){if(1&t){const d=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h5",4),e._uU(5,"Ajouter un Personnel"),e.qZA(),e.TgZ(6,"button",5)(7,"span",6),e._uU(8,"\xd7"),e.qZA()()(),e.TgZ(9,"div",7)(10,"form",8,9)(12,"div",10)(13,"div",11)(14,"div",12)(15,"label",13),e._uU(16,"Pr\xe9nom"),e.qZA(),e.TgZ(17,"input",14,15),e.NdJ("ngModelChange",function(l){return i.user.firstname=l}),e.qZA(),e.YNc(19,U,2,1,"div",16),e.qZA()(),e.TgZ(20,"div",11)(21,"div",12)(22,"label",17),e._uU(23,"Nom"),e.qZA(),e.TgZ(24,"input",18,19),e.NdJ("ngModelChange",function(l){return i.user.lastname=l}),e.qZA(),e.YNc(26,M,2,1,"div",16),e.qZA()(),e.TgZ(27,"div",20)(28,"div",12)(29,"label",21),e._uU(30,"Email"),e.qZA(),e.TgZ(31,"div",22)(32,"input",23,24),e.NdJ("ngModelChange",function(l){return i.user.email=l}),e.qZA(),e.TgZ(34,"span",25),e._UZ(35,"i",26),e.qZA()(),e.YNc(36,J,3,2,"div",16),e.qZA()(),e.TgZ(37,"div",20)(38,"h3",27),e._uU(39,"Adresse"),e.qZA(),e._UZ(40,"hr"),e.qZA(),e.TgZ(41,"div",20)(42,"div",12)(43,"label",28),e._uU(44,"Adresse"),e.qZA(),e.TgZ(45,"input",29),e.NdJ("ngModelChange",function(l){return i.user.address=l}),e.qZA()()(),e.TgZ(46,"div",11)(47,"div",12)(48,"label",30),e._uU(49,"Ville"),e.qZA(),e.TgZ(50,"input",31),e.NdJ("ngModelChange",function(l){return i.user.city=l}),e.qZA()()(),e.TgZ(51,"div",11)(52,"div",12)(53,"label",32),e._uU(54,"Pays"),e.qZA(),e.TgZ(55,"input",33),e.NdJ("ngModelChange",function(l){return i.user.country=l}),e.qZA()()(),e.TgZ(56,"div",11)(57,"div",12)(58,"label",34),e._uU(59,"Num\xe9ro de t\xe9l\xe9phone"),e.qZA(),e.TgZ(60,"input",35),e.NdJ("ngModelChange",function(l){return i.user.phone=l}),e.qZA()()(),e.TgZ(61,"div",11)(62,"div",12)(63,"label",36),e._uU(64,"Fonction"),e.qZA(),e.TgZ(65,"select",37)(66,"option",38),e._uU(67,"--- Selectionner ---"),e.qZA(),e.YNc(68,L,2,4,"option",39),e.qZA()()()(),e.TgZ(69,"button",40),e.NdJ("click",function(){e.CHM(d);const l=e.MAs(11);return e.KtG(i.ajouterUnPersonnel(l))}),e.YNc(70,E,1,0,"div",41),e._uU(71," Enregistrer "),e.qZA()()()()()()}if(2&t){const d=e.MAs(11),s=e.MAs(18),l=e.MAs(25),c=e.MAs(33);e.xp6(17),e.ekj("is-invalid",s.invalid&&s.touched),e.Q6J("ngModel",i.user.firstname),e.xp6(2),e.Q6J("ngIf",s.errors&&(s.valid||s.touched)),e.xp6(5),e.ekj("is-invalid",l.invalid&&l.touched),e.Q6J("ngModel",i.user.lastname),e.xp6(2),e.Q6J("ngIf",l.errors&&(l.valid||l.touched)),e.xp6(6),e.ekj("is-invalid",c.invalid&&c.touched),e.Q6J("ngModel",i.user.email),e.xp6(4),e.Q6J("ngIf",c.errors&&(c.valid||c.touched)),e.xp6(9),e.Q6J("ngModel",i.user.address),e.xp6(5),e.Q6J("ngModel",i.user.city),e.xp6(5),e.Q6J("ngModel",i.user.country),e.xp6(5),e.Q6J("ngModel",i.user.phone),e.xp6(8),e.Q6J("ngForOf",i.roles),e.xp6(1),e.Q6J("disabled",d.invalid||i.isLoaded),e.xp6(1),e.Q6J("ngIf",i.isLoaded)}},dependencies:[u.sg,u.O5,r._Y,r.YN,r.Kr,r.Fj,r.wV,r.JJ,r.JL,r.Q7,r.c5,r.On,r.F]}),n})();var A=a(3189);function I(n,o){1&n&&(e.TgZ(0,"div",59)(1,"span",60),e._UZ(2,"i",61),e.qZA()())}function S(n,o){1&n&&(e.TgZ(0,"div",59)(1,"span",62),e._UZ(2,"i",63),e.qZA()())}function w(n,o){1&n&&(e.TgZ(0,"div",59)(1,"span",64),e._UZ(2,"i",65),e.qZA()())}function P(n,o){if(1&n&&(e.TgZ(0,"div",66)(1,"span",67),e._uU(2),e.qZA()()),2&n){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(t.gender)}}function Q(n,o){1&n&&(e.TgZ(0,"div",68)(1,"span",67),e._uU(2,"Non indiqu\xe9"),e.qZA()())}function Y(n,o){if(1&n&&(e.TgZ(0,"div",52)(1,"div",53)(2,"div",17)(3,"span",54),e._uU(4),e.ALo(5,"date"),e.qZA()(),e.TgZ(6,"div",19)(7,"span",55),e._uU(8),e.qZA(),e.TgZ(9,"span",47),e._uU(10),e.qZA()(),e.YNc(11,I,3,0,"div",56),e.YNc(12,S,3,0,"div",56),e.YNc(13,w,3,0,"div",56),e.YNc(14,P,3,1,"div",57),e.YNc(15,Q,3,0,"div",58),e.qZA()()),2&n){const t=o.$implicit;e.xp6(4),e.Oqu(e.lcZ(5,9,t.dateCreation)),e.xp6(4),e.AsE("",t.lastname," ",t.firstname,""),e.xp6(2),e.hij(" ",t.email,""),e.xp6(1),e.Q6J("ngIf",null==t.status),e.xp6(1),e.Q6J("ngIf",1==t.status),e.xp6(1),e.Q6J("ngIf",0==t.status),e.xp6(1),e.Q6J("ngIf",null!=t.gender),e.xp6(1),e.Q6J("ngIf",null==t.gender)}}const R=function(n,o,t){return{itemsPerPage:n,currentPage:o,totalItems:t}},j=[{path:"",redirectTo:"liste",pathMatch:"full"},{path:"liste",component:(()=>{class n{constructor(t,i,d){this.userService=t,this.toastr=i,this.authService=d,this.search="",this.totalUsers=0,this.page=1,this.count=0,this.tableSize=10,this.tableSizes=[3,6,9,12],this.isClientManager=!1,this.isSuperAdmin=!1,this.isPersonnalManager=!1,this.users=[],this.tableName=""}ngOnInit(){this.isClientManager=this.authService.isClientManager(),this.isSuperAdmin=this.authService.isSuperAdmin(),this.isPersonnalManager=this.authService.isPersonnalManager(),this.isSuperAdmin?(this.getAllUsers(),this.tableName="Membre"):this.isPersonnalManager?(this.getAllPersonnals(),this.tableName="Personnel"):(this.getClients(),this.tableName="Client")}getClients(){this.userService.getAllClients().subscribe(t=>{this.users=t},t=>{this.toastr.error(t,"Listes des clients")})}getAllUsers(){this.userService.getAllUsers().subscribe(t=>{this.users=t.reverse()},t=>{this.toastr.error(t,"Liste des Utilisateurs")})}getAllPersonnals(){this.userService.getAllPersonnals().subscribe(t=>{this.users=t},t=>{this.toastr.error(t,"Liste des Personnels")})}onTableDataChange(t){this.page=t,this.getAllUsers()}onTableSizeChange(t){this.tableSize=t.target.value,this.page=1,this.getAllUsers()}getEmitter(t){"ajout\xe9"==t&&this.ngOnInit()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(h.K),e.Y36(f._W),e.Y36(_.$))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-list"]],decls:97,vars:19,consts:[[1,"font-weight-400","mb-3"],[1,"row"],[1,"col","mb-2"],["id","filterCr\xe9dits","method","post"],[1,"form-row"],[1,"col-sm-6","col-md-5","form-group"],["type","text","name","search","placeholder","votre recherche ici...",1,"form-control",3,"ngModel","ngModelChange"],[1,"icon-inside"],[1,"fas","fa-loop-alt"],[1,"col-12","col-sm-6","col-lg-4"],["href","","data-target","#add-personal-details","data-toggle","modal",1,"account-card-new","d-flex","align-items-center","rounded","h-100","p-3","mb-4","mb-lg-0"],[1,"w-100","text-center","line-height-4","m-0"],[1,"text-3"],[1,"fas","fa-plus-circle"],[1,"d-block","text-body","text-3"],[1,"text-5","font-weight-400","d-flex","align-items-center","px-4","mb-3"],[1,"transaction-title","py-2","px-4"],[1,"col-2","col-sm-1","text-center"],[1,""],[1,"col","col-sm-7"],[1,"col-auto","col-sm-2","d-none","d-sm-block","text-center"],[1,"col-3","col-sm-2","text-right"],[1,"transaction-list"],["class","transaction-item px-4 py-3",4,"ngFor","ngForOf"],["id","transaction-detail","role","dialog","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog","modal-dialog-centered","transaction-details"],[1,"modal-content"],[1,"modal-body"],[1,"row","no-gutters"],[1,"col-sm-5","d-flex","justify-content-center","bg-primary","rounded-left","py-4"],[1,"my-auto","text-center"],[1,"text-17","text-white","my-3"],[1,"fas","fa-building"],[1,"text-4","text-white","font-weight-400","my-3"],[1,"text-8","font-weight-500","text-white","my-4"],[1,"text-white"],[1,"col-sm-7"],[1,"text-5","font-weight-400","m-3"],["type","button","data-dismiss","modal","aria-label","Close",1,"close","font-weight-400"],["aria-hidden","true"],[1,"px-3"],[1,"list-unstyled"],[1,"mb-2"],[1,"float-right","text-3"],[1,"d-flex","align-items-center","font-weight-500","mb-4"],[1,"text-3","ml-auto"],[1,"font-weight-500"],[1,"text-muted"],[1,"text-center","mt-4"],[1,"pagination","justify-content-center","mt-4","mb-0"],["previousLabel","Prev","nextLabel","Next",3,"pageChange"],[3,"emitter"],[1,"transaction-item","px-4","py-3"],[1,"row","align-items-center","flex-row"],[1,"d-block","text-4","font-weight-300"],[1,"d-block","text-4"],["class","col-auto col-sm-2 d-none d-sm-block text-center text-3",4,"ngIf"],["class","col-3 col-sm-2 text-right text-4",4,"ngIf"],["class","col-3 col-sm-2 text-right text-1 text-danger",4,"ngIf"],[1,"col-auto","col-sm-2","d-none","d-sm-block","text-center","text-3"],["data-toggle","tooltip","data-original-title","In Progress",1,"text-warning"],[1,"fas","fa-ellipsis-h"],["data-toggle","tooltip","data-original-title","Completed",1,"text-success"],[1,"fas","fa-check-circle"],["data-toggle","tooltip","data-original-title","Cancelled",1,"text-danger"],[1,"fas","fa-times-circle"],[1,"col-3","col-sm-2","text-right","text-4"],[1,"text-nowrap"],[1,"col-3","col-sm-2","text-right","text-1","text-danger"]],template:function(t,i){1&t&&(e.TgZ(0,"h2",0),e._uU(1),e.qZA(),e.TgZ(2,"div",1)(3,"div",2)(4,"form",3)(5,"div",4)(6,"div",5)(7,"input",6),e.NdJ("ngModelChange",function(s){return i.search=s}),e.qZA(),e.TgZ(8,"span",7),e._UZ(9,"i",8),e.qZA()()()()()(),e.TgZ(10,"div",1)(11,"div",9)(12,"a",10)(13,"p",11)(14,"span",12),e._UZ(15,"i",13),e.qZA(),e.TgZ(16,"span",14),e._uU(17),e.qZA()()()()(),e.TgZ(18,"h3",15),e._uU(19),e.qZA(),e.TgZ(20,"div",16)(21,"div",1)(22,"div",17)(23,"span",18),e._uU(24,"Date"),e.qZA()(),e.TgZ(25,"div",19),e._uU(26,"Nom & Pr\xe9nom"),e.qZA(),e.TgZ(27,"div",20),e._uU(28,"Status"),e.qZA(),e.TgZ(29,"div",21),e._uU(30,"Genre"),e.qZA()()(),e.TgZ(31,"div",22),e.YNc(32,Y,16,11,"div",23),e.ALo(33,"paginate"),e.ALo(34,"filter"),e.ALo(35,"slice"),e.qZA(),e.TgZ(36,"div",24)(37,"div",25)(38,"div",26)(39,"div",27)(40,"div",28)(41,"div",29)(42,"div",30)(43,"div",31),e._UZ(44,"i",32),e.qZA(),e.TgZ(45,"h3",33),e._uU(46,"Envato Pty Ltd"),e.qZA(),e.TgZ(47,"div",34),e._uU(48,"$557.20"),e.qZA(),e.TgZ(49,"p",35),e._uU(50,"15 March 2019"),e.qZA()()(),e.TgZ(51,"div",36)(52,"h5",37),e._uU(53,"Transaction Details "),e.TgZ(54,"button",38)(55,"span",39),e._uU(56,"\xd7"),e.qZA()()(),e._UZ(57,"hr"),e.TgZ(58,"div",40)(59,"ul",41)(60,"li",42),e._uU(61,"Payment Amount "),e.TgZ(62,"span",43),e._uU(63,"$562.00"),e.qZA()(),e.TgZ(64,"li",42),e._uU(65,"Fee "),e.TgZ(66,"span",43),e._uU(67,"-$4.80"),e.qZA()()(),e._UZ(68,"hr",42),e.TgZ(69,"p",44),e._uU(70,"Total Amount "),e.TgZ(71,"span",45),e._uU(72,"$557.20"),e.qZA()(),e.TgZ(73,"ul",41)(74,"li",46),e._uU(75,"Paid By:"),e.qZA(),e.TgZ(76,"li",47),e._uU(77,"Envato Pty Ltd"),e.qZA()(),e.TgZ(78,"ul",41)(79,"li",46),e._uU(80,"Transaction ID:"),e.qZA(),e.TgZ(81,"li",47),e._uU(82,"26566689645685976589"),e.qZA()(),e.TgZ(83,"ul",41)(84,"li",46),e._uU(85,"Description:"),e.qZA(),e.TgZ(86,"li",47),e._uU(87,"Envato March 2019 Member Payment"),e.qZA()(),e.TgZ(88,"ul",41)(89,"li",46),e._uU(90,"Status:"),e.qZA(),e.TgZ(91,"li",47),e._uU(92,"Completed"),e.qZA()()()()()()()()(),e.TgZ(93,"div",48)(94,"ul",49)(95,"pagination-controls",50),e.NdJ("pageChange",function(s){return i.onTableDataChange(s)}),e.qZA()()(),e.TgZ(96,"app-add",51),e.NdJ("emitter",function(s){return i.getEmitter(s)}),e.qZA()),2&t&&(e.xp6(1),e.hij("",i.tableName,"s"),e.xp6(6),e.Q6J("ngModel",i.search),e.xp6(10),e.hij("Ajouter un ",i.tableName," "),e.xp6(2),e.hij("Liste des ",i.tableName,"s"),e.xp6(13),e.Q6J("ngForOf",e.xi3(33,5,e.xi3(34,8,e.Dn7(35,11,i.users,0,i.limit),i.search),e.kEZ(15,R,i.tableSize,i.page,i.count))))},dependencies:[u.sg,u.O5,r._Y,r.Fj,r.JJ,r.JL,r.On,r.F,g.LS,Z,u.OU,u.uU,A.Z,g._s]}),n})()},{path:"add",component:Z}];let F=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[m.Bz.forChild(j),m.Bz]}),n})(),O=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[u.ez,F,r.u5,A.h,g.JX]}),n})()}}]);